---
description: Fluxo de desenvolvimento obrigatório para todas as tarefas do projeto user-contact
globs: **/*
alwaysApply: true
---

# Fluxo de Desenvolvimento Obrigatório

Este documento define o fluxo de trabalho que DEVE ser seguido para TODAS as tarefas de desenvolvimento neste projeto.

## Inicialização da Tarefa

### Obtenção da Tarefa

- **Cenário 1:** Você recebe uma tarefa diretamente do usuário
  - Use a tarefa fornecida como está
  - Prossiga para a etapa de "Compreensão do Escopo"

- **Cenário 2:** Você recebe instrução para buscar a próxima tarefa
  - Use a ferramenta MCP `mcp_task-master-ai_next_task` com `projectRoot` definido como o caminho absoluto do workspace
  - Se nenhuma tarefa for retornada, informe o usuário
  - Se uma tarefa for retornada, prossiga para a etapa de "Compreensão do Escopo"

## Fluxo de Execução (Obrigatório)

Siga estas etapas na ordem exata especificada abaixo. **NÃO pule nenhuma etapa.**

### 1. Compreensão do Escopo e Planejamento

**Ação obrigatória:**
- Analise completamente a tarefa recebida
- Identifique todos os arquivos, componentes e dependências envolvidos
- Crie um plano de ação detalhado antes de iniciar qualquer código
- Se necessário, use `codebase_search` para entender o contexto do código existente

**Critério de sucesso:** Você deve ter clareza total sobre o que será desenvolvido antes de prosseguir.

### 2. Criação de Feature Branch

**Ação obrigatória:**
- Crie uma nova branch Git usando `git checkout -b feature/nome-descritivo-da-tarefa`
- Use nomes descritivos em kebab-case (ex: `feature/user-authentication`, `feature/add-contact-validation`)
- **NUNCA** trabalhe diretamente na branch principal (main/master)

**Comando exemplo:**
```bash
git checkout -b feature/nome-da-tarefa
```

### 3. Quality Assurance Pré-Desenvolvimento

**Ação obrigatória:**
- Execute os scripts de QA ANTES de iniciar o desenvolvimento
- Identifique e corrija qualquer problema existente no código base
- Use `run_terminal_cmd` para executar os scripts de QA do projeto

**Scripts típicos a executar:**
- `vendor/bin/pint --test` ou `vendor/bin/pint --dirty` (Laravel Pint)
- `php artisan test` (testes do projeto)
- Qualquer outro script de lint/format definido no projeto

**Critério de sucesso:** Todos os scripts de QA devem passar sem erros antes de prosseguir.

### 4. Desenvolvimento

**Ação obrigatória:**
- Implemente a funcionalidade conforme o plano criado na etapa 1
- Siga todas as convenções de código do projeto
- Siga as regras específicas do Laravel Boost quando aplicável
- Crie ou modifique apenas os arquivos necessários
- Use as ferramentas apropriadas (Artisan commands, MCP tools, etc.)

**Boas práticas durante o desenvolvimento:**
- Verifique arquivos similares existentes para manter consistência
- Use `read_file` para entender código existente antes de modificar
- Use `grep` ou `codebase_search` para encontrar padrões existentes
- Execute testes localmente durante o desenvolvimento quando apropriado

### 5. Quality Assurance Pré-Commit

**Ação obrigatória:**
- Execute NOVAMENTE todos os scripts de QA após o desenvolvimento
- Corrija TODOS os problemas encontrados antes de fazer commit
- Garanta que o código está formatado corretamente (`vendor/bin/pint --dirty`)
- Garanta que todos os testes passam (`php artisan test`)

**Critério de sucesso:** Todos os scripts de QA devem passar sem erros ou warnings críticos.

### 6. Commit

**Ação obrigatória:**
- Faça commit APENAS após todas as etapas anteriores estarem completas
- Use mensagens de commit descritivas e focadas no desenvolvimento realizado
- Siga o padrão: `tipo(escopo): descrição breve e clara`

**Formato de commit recomendado:**
```bash
git commit -m "feat(contacts): adiciona validação de email obrigatório

- Implementa validação de formato de email no formulário de contatos
- Adiciona testes unitários para validação
- Atualiza documentação da API"
```

**Critério de sucesso:** Commit deve ser feito apenas quando a tarefa está completamente funcional e testada.

### 7. Registro no Basic Memory MCP

**Ação obrigatória:**
- Use a ferramenta MCP `mcp_server-memory_add_observations` para registrar o log de desenvolvimento
- Crie uma observação detalhada sobre o que foi desenvolvido
- Inclua informações sobre decisões técnicas, desafios encontrados e soluções implementadas

**Estrutura recomendada da observação:**
- Tarefa completada: [ID e título da tarefa]
- Funcionalidades implementadas: [lista]
- Arquivos modificados/criados: [lista]
- Decisões técnicas: [detalhes]
- Testes realizados: [detalhes]

**Critério de sucesso:** Log deve ser salvo no Basic Memory antes de considerar a tarefa finalizada.

## Regras Importantes

- **NUNCA** pule etapas do fluxo
- **SEMPRE** execute QA antes e depois do desenvolvimento
- **SEMPRE** trabalhe em feature branches isoladas
- **SEMPRE** registre o desenvolvimento no Basic Memory após completar
- Se encontrar problemas durante qualquer etapa, resolva-os antes de prosseguir
- Se uma etapa falhar, não prossiga para a próxima até que seja resolvida

## Exceções

As únicas exceções permitidas são:
- Tarefas de documentação pura (sem código) podem pular a etapa 3 e 5 de QA
- Correções críticas urgentes podem ter QA simplificado, mas ainda devem ser executadas

Para qualquer outra situação, siga o fluxo completo.
